---
page_title: "dokploy_registry Resource - dokploy"
subcategory: ""
description: |-
  Manages a Docker registry configuration in Dokploy.
---

# dokploy_registry (Resource)

Manages a Docker registry configuration in Dokploy. Registries allow you to pull private Docker images from various container registries.

Supports popular registries including:
- GitHub Container Registry (ghcr.io)
- Docker Hub
- AWS Elastic Container Registry (ECR)
- Google Container Registry (GCR)
- Azure Container Registry (ACR)
- Self-hosted registries (Harbor, etc.)

## Example Usage

### GitHub Container Registry

```terraform
resource "dokploy_registry" "ghcr" {
  registry_name = "GitHub Container Registry"
  registry_type = "cloud"
  registry_url  = "ghcr.io"
  username      = "myorg"
  password      = var.github_token
  image_prefix  = "ghcr.io/myorg"
}
```

### Docker Hub

```terraform
resource "dokploy_registry" "dockerhub" {
  registry_name = "Docker Hub"
  registry_type = "cloud"
  registry_url  = "docker.io"
  username      = "myusername"
  password      = var.dockerhub_token
  image_prefix  = "docker.io/myusername"
}
```

### AWS ECR

```terraform
resource "dokploy_registry" "ecr" {
  registry_name = "AWS ECR"
  registry_type = "cloud"
  registry_url  = "123456789012.dkr.ecr.us-east-1.amazonaws.com"
  username      = "AWS"
  password      = var.ecr_token
  image_prefix  = "123456789012.dkr.ecr.us-east-1.amazonaws.com/myapp"
}
```

### Google Container Registry

```terraform
resource "dokploy_registry" "gcr" {
  registry_name = "Google Container Registry"
  registry_type = "cloud"
  registry_url  = "gcr.io"
  username      = "_json_key"
  password      = var.gcp_service_account_key
  image_prefix  = "gcr.io/my-project"
}
```

### Registry with Specific Server

```terraform
resource "dokploy_registry" "build_server_registry" {
  registry_name = "Build Server Registry"
  registry_type = "cloud"
  registry_url  = "registry.example.com"
  username      = "admin"
  password      = var.registry_password
  image_prefix  = "registry.example.com/myapp"
  server_id     = dokploy_server.build.id
}
```

### Self-hosted Harbor Registry

```terraform
resource "dokploy_registry" "harbor" {
  registry_name = "Harbor Registry"
  registry_type = "cloud"
  registry_url  = "harbor.example.com"
  username      = "robot$myrobot"
  password      = var.harbor_robot_token
  image_prefix  = "harbor.example.com/library"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `image_prefix` (String) Image prefix for the registry (e.g., ghcr.io/myorg).
- `password` (String, Sensitive) Password for the registry.
- `registry_name` (String) Name of the registry.
- `registry_url` (String) URL of the registry (e.g., ghcr.io, docker.io).
- `username` (String) Username for the registry.

### Optional

- `registry_type` (String) Type of registry. Currently only 'cloud' is supported. Defaults to `cloud`.
- `server_id` (String) Server ID to associate the registry with (optional).

### Read-Only

- `id` (String) The unique identifier of the registry.

## Authentication Tokens

Different registries require different authentication methods:

### GitHub Container Registry (ghcr.io)
- **Username**: Your GitHub username or organization
- **Password**: Personal access token with `read:packages` scope

### Docker Hub
- **Username**: Your Docker Hub username
- **Password**: Docker Hub access token (recommended) or password

### AWS ECR
- **Username**: `AWS`
- **Password**: ECR authorization token (valid for 12 hours)
  ```bash
  aws ecr get-login-password --region us-east-1
  ```

### Google Container Registry (gcr.io)
- **Username**: `_json_key`
- **Password**: Service account JSON key (entire JSON as a string)

### Harbor
- **Username**: Robot account name (e.g., `robot$myrobot`)
- **Password**: Robot account token

## Security Best Practices

1. **Use variables for sensitive data**: Never hardcode passwords
   ```terraform
   password = var.registry_password
   ```

2. **Use access tokens**: Prefer tokens over passwords when available

3. **Limit token permissions**: Grant minimal required permissions

4. **Rotate tokens regularly**: Update tokens periodically for security

## Import

Import is supported using the following syntax:

```shell
# Registries can be imported using their ID
terraform import dokploy_registry.ghcr "registry-id-123"
```
